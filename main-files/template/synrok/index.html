<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Synrok - Mobile HTML Template</title>

    <!-- Plugins -->
    <link rel="stylesheet" type="text/css" href="assets/plugins/metismenu/metisMenu.min.css" />
    <link rel="stylesheet" type="text/css" href="assets/plugins/metismenu/mm-vertical.css" />
    
    <!--CSS Files-->
    <link href="assets/css/bootstrap.min.css" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.3/font/bootstrap-icons.css">
    <link href="assets/css/style.css" rel="stylesheet"/>
    <link href="assets/css/dark-theme.css" rel="stylesheet"/>
  </head>
  <body>

    <!--page loader-->
    <div class="loader-wrapper">
      <div class="d-flex justify-content-center align-items-center position-absolute top-50 start-50 translate-middle">
        <div class="spinner-border text-white" role="status">
          <span class="visually-hidden">Loading...</span>
        </div>
      </div>
    </div>
   <!--end loader-->

   <!--start wrapper-->
    <div class="wrapper">

      <!--start to page content-->
       <div class="page-content">

        <div class="card rounded-0 border-0">
          <div class="card-body p-0">
             <div class="text-center">
              <img class="img-fluid" src="assets/images/splash-screen-1.webp" alt=""/> 
             </div>

             <div class="text-center my-4">
               <h5 class="text-dark fw-bold">We Promis Productivity</h5>
               <p class="mb-0">At vero eos et accusamus et iusto odio dignissimos ducimus qui blanditiis</p>
             </div>
             <div class="d-grid">
                <a href="authentication-splash-2.html" class="btn btn-dark btn-ecomm rounded-3">Get Started</a>   
             </div>
          </div>
        </div>

        <!-- Add form for selecting models and entering API keys -->
        <div class="card rounded-0 border-0 mt-4">
          <div class="card-body p-0">
            <form id="model-selection-form" method="POST" action="/generate">
              <div class="mb-3">
                <label for="idea" class="form-label">Idea</label>
                <input type="text" class="form-control" id="idea" name="idea" required>
              </div>
              <div class="mb-3">
                <label for="llm" class="form-label">Select Model</label>
                <select class="form-select" id="llm" name="llm" required>
                  <option value="claude">Claude 3.5</option>
                  <option value="sonnet">Sonnet</option>
                  <option value="deepseek">Deep Seek</option>
                </select>
              </div>
              <div class="mb-3">
                <label for="api_key" class="form-label">API Key</label>
                <input type="text" class="form-control" id="api_key" name="api_key" required>
              </div>
              <div class="d-grid">
                <button type="submit" class="btn btn-dark btn-ecomm rounded-3">Generate</button>
              </div>
            </form>
          </div>
        </div>

        <!-- Add conversation log section -->
        <div class="card rounded-0 border-0 mt-4">
          <div class="card-body p-0">
            <h5 class="text-dark fw-bold">Conversation Log</h5>
            <div id="conversation-log" class="conversation-log" style="max-height: 300px; overflow-y: auto;">
              <!-- Conversation messages will be appended here -->
            </div>
          </div>
        </div>

       </div>
     <!--end to page content-->

    </div>
   <!--end wrapper-->


    <!--JS Files-->  
    <script src="assets/js/bootstrap.bundle.min.js"></script>
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/cookies-theme-switcher.js"></script>

    <script src="assets/js/loader.js"></script>
   
    <!-- Add script to handle conversation log display -->
    <script>
      document.getElementById('model-selection-form').addEventListener('submit', function(event) {
        event.preventDefault();
        const formData = new FormData(this);
        fetch('/generate', {
          method: 'POST',
          body: formData
        })
        .then(response => response.json())
        .then(data => {
          const conversationLog = document.getElementById('conversation-log');
          conversationLog.innerHTML = '';
          data.conversation_log.forEach(log => {
            const logEntry = document.createElement('div');
            logEntry.classList.add('log-entry');
            logEntry.innerHTML = `<strong>${log.agent} (${log.role})</strong> [${log.timestamp}]: ${log.message}`;
            conversationLog.appendChild(logEntry);
          });
        })
        .catch(error => console.error('Error:', error));
      });
    </script>

  </body>
</html>
